---
title: Debian ecology software installation
date: 2018-4-4
categories: Linux
tags: [ software, custom]
---
以下未特殊注明， 所有操作均在root账户下进行。此电脑型号为联想拯救者ISK-15.6, cpu为i5-6300hq， 独显为GTX960m，其他型号可能操作略有不同， 视具体情况而定。操作系统内核版本为4.15.0-kali2-amd64。
#### 安装中文输入法
1. 安装输入法框架fcitx
```
    apt install fcitx
```
2. 安装google拼音
```
    apt install fcitx-googlepinyin
```
3. 重启电脑
4. 在命令行输入fcitx-configtool， 添加输入法， 在查找内输入google就可以查找到之前安装的google拼音， 点击确定，关闭gui就可以通过ctrl+space切换输入法
![](./images/2018-04-04-195757_821x489_scrot.png)
![](./images/2018-04-04-195838_898x510_scrot.png)

如果希望折腾， 也可以尝试安装sougou拼音， 不过能不能装上， 那就需要看运气了

#### 截图工具
```
apt install scrot
```

1. 截取整个桌面
```
scrot
```
2. 使用鼠标选取指定位置
```
scrot -s
```

#### 安装oh-my-zsh插件
```
git clone https://github.com/robbyrussell/oh-my-zsh.git
```
安装脚本在master分支下tools/install.sh

#### 安装雅黑和Consolas字体
1. 下载雅黑和Consolas[字体文件](./file/YaHeiConsolas.tar.gz)
2. 将文件放到系统字体文件夹内
```
    mkdir /usr/share/fonts/vista
    cp YaHeiConsolas.ttf /usr/share/fonts/vista
```
3. 赋予文件权限
```
    chmod 644 YaHeiConsolas.ttf
```
4. 安装字体文件并刷新缓存
```
    mkfontscale && mkfontdir && fc-cache -fv
```
#### 安装SSR及polipo
```
    git clone https://github.com/shadowsocksr-backup/shadowsocksr.git
    apt install polipo
```
shadowsocksr配置需要去github查看， 根据服务器不同， 需要的配置项也不同。  
polipo配置
```properties
logSyslog = true
logFile = /var/log/polipo/polipo.log
proxyAddress = "0.0.0.0"

socksParentProxy = "127.0.0.1:1080"
socksProxyType = socks5

chunkHighMark = 50331648

objectHighMark = 12384

serverMaxSlots = 64
serverSlots = 16
serverSlots1 = 32

```
> ssr现在主要分支是manyuser分支， 可以直接下载manyuser分支
#### 设置终端大小
```
    gnome-terminal --geometry=160x40+280+100
```

#### 第三方软件apt仓库
1. vscode
```
deb [arch=amd64] http://packages.microsoft.com/repos/vscode stable main
```

#### 安装nvidia显卡驱动
1. 禁用开源驱动nouveau
```
touch /etc/modprobe.d/nvidia-installer-disable-nouveau.conf
将文件中内容修改为:
# generated by nvidia-installer
blacklist nouveau
options nouveau modeset=0
```

2. 安装内核头文件
```
apt install -y linux-headers-$(uname -r)
```
> 此处需要注意， 可能无法安装成功。 若失败， 则必须要先升级内核为最新版本，然后再次尝试安装。

3. 安装nvidia驱动相关包
```
apt-get install nvidia-kernel-dkms nvidia-driver nvidia-cuda-toolkit
```
> nvidia-cuda-toolkit是nvidia公司的一个平行计算平台和应用程序接口， 如果只是日常使用， 没有必要安装。 在安装时提示生成xorg.conf文件， 要选择no

4. 安装双显卡切换解决方案
```
apt install bumblebee-nvidia primus
```
5. 添加当前用户到bumblebee用户组
```
adduser $USER bumblebee
```
6. 修改bumblebee配置
```properties
# 修改/etc/bumblebee/bumblebee.conf
Driver=nvidia
# 修改/etc/bumblebee/xorg.conf.nvidia
# 在Seciton “Device”中添加PCI ID，
BusID "PCI:01:00:0"
数值通过 lspci | grep -i 3d得到
```
__需要将PCI接口号中的最后一个"."改为":"后， 再将此值添加进上述配置文件__
> gtx960m通过lspci显示为“3D controller: NVIDIA Corporation GM107M [GeForce GTX 960M] (rev a2)”， 故其他通过 “grep VGA”得到独显PCI接口号的方法，并不适用
7. bumblebee默认是没有启动的，需要手动启动bumblebee服务
```
service bumblebee start/restart
```
8. optirun启动独显
```
# optirun 软件名称 切换到独显启动
```

#### 安装显卡测试工具
```
apt install mesa-utils
glxgears
```

#### 安装chrome浏览器
1. 添加google软件源
```
touch /etc/apt/sources.list.d/google.list 
echo 'deb http://dl.google.com/linux/chrome/deb/ stable main' > /etc/apt/sources.list.d/google.list
```
2. 获取公钥签名
```
wget https://dl-ssl.google.com/linux/linux_signing_key.pub
```
3. 将公钥签名添加到apt中
```
apt-key add linux_signing_key.pub && rm -f linux_signing_key.pub
```
4. 更新本地软件源缓存
```
apt update
```
5. 安装chrome浏览器 
```
apt install google-chrome-stable
```
> chrome在root账户下由于系统保护限制无法打开， 需要使用其他账户， 虽然也可以绕过这个限制， 不过由于软件稳定性的原因，不建议这么做