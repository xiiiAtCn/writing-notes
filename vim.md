---
title: 通过vimtutor探寻vim
date： 2018-2-10
categories: Linux
tags: vim, software
---
#### vimtutor简介
vimtutor是为了帮助vim初学了解vim的命令所建的一个说明文档。一般情况下，如果安装了vim的全部模块，在命令行输入vimtutor，就会出现如下的内容:
![](./pic/vimtutor.png)
vimtutor总共分为7个课时(Lesson), 分别从最简单的光标移动，到文本的插入删除，查找，复制到最后的帮助，从多个方面介绍了vim的命令及其用法。整篇文章耗时在半个小时左右，但看完不是目的，主要还是需要平时多用多练，才能真正理解vim的命令及其使用的技巧。以下根据vimtutor中的课程排列，对其中介绍的命令做了一个简要的总结。

#### 命令内容
##### lesson 1
1. 光标移动命令(h j k l)
    1. h: 在这四个字母的最左边, 控制光标向左移动
    2. l: 在这四个字母的最右边, 控制光标向右移动
    3. j: 下面带着一个勾, 下勾, 控制光标向下移动
    4. k: 剩下的k就控制光标向上移动
2. 退出
    1. q!: 强制退出
    2. wq: 保存并退出
3. 删除文本: x
4. 文本编辑. 以下操作将会进入编辑模式, 本身的命令字符不会被插入
    1. i: 在光标之前插入文本
    2. A: 添加在该行的末尾
##### lesson 2
1. 删除文本
    1. 从光标位置到当前单词词尾的字符: dw(d表示delete)
    2. 删除从光标位置到行尾的所有字符: d$($在正则表达式中表示行尾, 则可推测d^表示删除光标到行首的所有字符)
    3. 删除整行: dd
2. 重复光标移动指令多次: number + motion
3. 标准的变更指令格式: operator [number] motion, 其中
    1. operator - 需要执行什么操作, 如d是删除
    2. [number] - 可选, 动作执行的次数
    3. motion - 在文本上移动以执行操作, w表示word, $表示行尾
``` bash vim变更指令示例
    以下操作均在normal模式之下:
    d3w: 删除三个单词, 汉字是根据标点来确定是否为一个单词
    d3$: 删除到从光标位置起，第三行的行尾
```
4. 移动到行首使用0(直接键入0即可)
5. 撤销之前的操作 u
6. 撤销在一行执行的所有操作 U
7. 撤销所执行的撤销 ctrl+r
##### lesson 3
1. 粘贴: p(paste),会将粘贴板内的内容放到光标所在位置的下一行,并将光标定位在粘贴文本的行首
2. 替换: r(replace), rx(x为要替换为的字符). 将光标处的字符替换为x所代表的字符
3. 删除并进入插入模式: c [number] motion .c(change), 属于operation [number] motion的一种.
> c命令和d命令的区别在于: c命令执行删除操作之后，会进入插入(insert)模式，而d命令则只会进行删除，模式仍为普通(normal)模式
##### lesson 4
1. G命令
    1. ctrl+g: 显示光标在当前文件的位置和文件的相关信息
    2. G: 光标移动到文本的最后一行
    3. gg: 光标移动到文本的第一行
    4. number g: 光标跳转到指定行
2. 字符匹配
    1. 向前查找(行数增加的顺序): /phase
    2. 向后查找(行数减少的顺序): ?phase
    3. n: 查找下一个匹配的字符串(按查找的方向)
    4. N: 查找上一个匹配的字符串(查找的相反方向)
    5. ctrl+o: 跳转到上一次光标所在的行(不会重复)
    6. ctrl+i: 跳转到下一次光标所在的行(不会重复)
3. %
    使用%去匹配(,[和{中与之对应的另一半),],}的位置
4. 使用新的字符替换旧的字符
    1. 只执行一次替换: :s/old/new
    2. 只在某一行执行: :s/old/new/g
    3. 在指定行替换: begin, end s/old/new/g
    4. 整个文本全部执行: %s/old/new/g
    5. 全局替换并在替换之前进行确认: %s/old/new/gc
> s: string g: global c:conform
##### lesson 5
1. 执行外部命令: :! command
2. 将选中的文本写入另一个文件中: :w filename. 此操作需要先进入visual模式, 然后键入:(冒号)和w, 然后加上空格和文件名
3. 将文件中的文本写入当前光标处: :r filename. 如果使用:r !dir则会将dir命令的输出结果写入文本中
```bash
    :r !dir

 E:\Microsoft VS Code ¼

2018/02/10  19:48    <DIR>          .
2018/02/10  19:48    <DIR>          ..
2018/02/07  17:12            19,600 api-ms-win-core-console-l1-1-0.dll
2018/02/07  17:13            19,080 api-ms-win-core-datetime-l1-1-0.dll
2018/02/07  17:13            19,080 api-ms-win-core-debug-l1-1-0.dll
2018/02/07  17:13            19,080 api-ms-win-core-errorhandling-l1-1-0.dll
2018/02/07  17:13            22,672 api-ms-win-core-file-l1-1-0.dll
2018/02/07  17:12            19,080 api-ms-win-core-file-l1-2-0.dll
2018/02/07  17:19        80,790,672 Code.exe
...
```
##### lesson 6
1. 在光标下方插入一行: o, 在光标上方插入一行: O
2. 将光标定位在紧邻当前光标所在位置后, 并进入插入模式: a
3. 将光标定位在当前光标所在行的行尾, 并进入插入模式: A
4. 将光标移动到单词的末尾: e
5. 复制文本: y, 粘贴文本: p
6. 在正常模式下输入大写的r,将进入替换模式,直至输入ESC为止
7. 输入set xxx 进行设置操作
```bash
set nu                # number 显示行号
set nonu              # no number取消行号显示
set ic                # ignore case 匹配时忽略大小写
set noic              # 匹配时区分大小写
set ic                # incsearch  匹配时显示单词一部分匹配匹配字符串的字符
set hls               # highlight search 高亮所有匹配项
```
##### lesson 7
1. 查看帮助 :help F1 或HELP键
2. CTRL+w进行窗口的切换
3. 输入: command时, 可以通过CTRL + d查看所有可能的参数.通过tab键来选择某个选项
4. 可以通过创建一个vimrc文件来保存你所偏好的设置。

#### 总结
vimtutor中只是列举了一些基础的命令，但对于我们熟悉vim的命令是十分有帮助的。黑客是每一个程序员都向往的目标，那么vim岂能不知如何操作？当然，光只有vimtutor里面的介绍，想玩转vim还是有很大难度的，但是只要入了门，那么继续深入下去自然不会是难事了。
> 不知你曾注意过没有: 电影中的黑客，电脑屏幕上打印的都是一些无用的系统日志或者是html代码